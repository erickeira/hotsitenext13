var _=(F,R)=>{"use strict";var W;function w(i){for(var r=[],e=0;e<i.length;){var a=i[e];if(a==="*"||a==="+"||a==="?"){r.push({type:"MODIFIER",index:e,value:i[e++]});continue}if(a==="\\"){r.push({type:"ESCAPED_CHAR",index:e++,value:i[e++]});continue}if(a==="{"){r.push({type:"OPEN",index:e,value:i[e++]});continue}if(a==="}"){r.push({type:"CLOSE",index:e,value:i[e++]});continue}if(a===":"){for(var s="",n=e+1;n<i.length;){var o=i.charCodeAt(n);if(o>=48&&o<=57||o>=65&&o<=90||o>=97&&o<=122||o===95){s+=i[n++];continue}break}if(!s)throw TypeError("Missing parameter name at "+e);r.push({type:"NAME",index:e,value:s}),e=n;continue}if(a==="("){var E=1,u="",n=e+1;if(i[n]==="?")throw TypeError('Pattern cannot start with "?" at '+n);for(;n<i.length;){if(i[n]==="\\"){u+=i[n++]+i[n++];continue}if(i[n]===")"){if(--E==0){n++;break}}else if(i[n]==="("&&(E++,i[n+1]!=="?"))throw TypeError("Capturing groups are not allowed at "+n);u+=i[n++]}if(E)throw TypeError("Unbalanced pattern at "+e);if(!u)throw TypeError("Missing pattern at "+e);r.push({type:"PATTERN",index:e,value:u}),e=n;continue}r.push({type:"CHAR",index:e,value:i[e++]})}return r.push({type:"END",index:e,value:""}),r}function N(i,r){r===void 0&&(r={});for(var e=w(i),a=r.prefixes,s=a===void 0?"./":a,n="[^"+y(r.delimiter||"/#?")+"]+?",o=[],E=0,u=0,d="",f=function(h){if(u<e.length&&e[u].type===h)return e[u++].value},t=function(h){var T=f(h);if(T!==void 0)return T;var b=e[u];throw TypeError("Unexpected "+b.type+" at "+b.index+", expected "+h)},c=function(){for(var h,T="";h=f("CHAR")||f("ESCAPED_CHAR");)T+=h;return T};u<e.length;){var p=f("CHAR"),m=f("NAME"),x=f("PATTERN");if(m||x){var v=p||"";s.indexOf(v)===-1&&(d+=v,v=""),d&&(o.push(d),d=""),o.push({name:m||E++,prefix:v,suffix:"",pattern:x||n,modifier:f("MODIFIER")||""});continue}var l=p||f("ESCAPED_CHAR");if(l){d+=l;continue}if(d&&(o.push(d),d=""),f("OPEN")){var v=c(),g=f("NAME")||"",A=f("PATTERN")||"",j=c();t("CLOSE"),o.push({name:g||(A?E++:""),pattern:g&&!A?n:A,prefix:v,suffix:j,modifier:f("MODIFIER")||""});continue}t("END")}return o}function M(i,r){return P(N(i,r),r)}function P(i,r){r===void 0&&(r={});var e=C(r),a=r.encode,s=a===void 0?function(u){return u}:a,n=r.validate,o=n===void 0||n,E=i.map(function(u){if(typeof u=="object")return RegExp("^(?:"+u.pattern+")$",e)});return function(u){for(var d="",f=0;f<i.length;f++){var t=i[f];if(typeof t=="string"){d+=t;continue}var c=u?u[t.name]:void 0,p=t.modifier==="?"||t.modifier==="*",m=t.modifier==="*"||t.modifier==="+";if(Array.isArray(c)){if(!m)throw TypeError('Expected "'+t.name+'" to not repeat, but got an array');if(c.length===0){if(p)continue;throw TypeError('Expected "'+t.name+'" to not be empty')}for(var x=0;x<c.length;x++){var v=s(c[x],t);if(o&&!E[f].test(v))throw TypeError('Expected all "'+t.name+'" to match "'+t.pattern+'", but got "'+v+'"');d+=t.prefix+v+t.suffix}continue}if(typeof c=="string"||typeof c=="number"){var v=s(String(c),t);if(o&&!E[f].test(v))throw TypeError('Expected "'+t.name+'" to match "'+t.pattern+'", but got "'+v+'"');d+=t.prefix+v+t.suffix;continue}if(!p){var l=m?"an array":"a string";throw TypeError('Expected "'+t.name+'" to be '+l)}}return d}}function D(i,r,e){e===void 0&&(e={});var a=e.decode,s=a===void 0?function(n){return n}:a;return function(n){var o=i.exec(n);if(!o)return!1;for(var E=o[0],u=o.index,d=Object.create(null),f=1;f<o.length;f++)(function(t){if(o[t]!==void 0){var c=r[t-1];c.modifier==="*"||c.modifier==="+"?d[c.name]=o[t].split(c.prefix+c.suffix).map(function(p){return s(p,c)}):d[c.name]=s(o[t],c)}})(f);return{path:E,index:u,params:d}}}function y(i){return i.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function C(i){return i&&i.sensitive?"":"i"}function H(i,r){if(!r)return i;var e=i.source.match(/\((?!\?)/g);if(e)for(var a=0;a<e.length;a++)r.push({name:a,prefix:"",suffix:"",modifier:"",pattern:""});return i}function I(i,r,e){return RegExp("(?:"+i.map(function(a){return O(a,r,e).source}).join("|")+")",C(e))}function S(i,r,e){return $(N(i,e),r,e)}function $(i,r,e){e===void 0&&(e={});for(var a=e.strict,s=a!==void 0&&a,n=e.start,o=e.end,E=e.encode,u=E===void 0?function(A){return A}:E,d="["+y(e.endsWith||"")+"]|$",f="["+y(e.delimiter||"/#?")+"]",t=n===void 0||n?"^":"",c=0;c<i.length;c++){var p=i[c];if(typeof p=="string")t+=y(u(p));else{var m=y(u(p.prefix)),x=y(u(p.suffix));if(p.pattern)if(r&&r.push(p),m||x)if(p.modifier==="+"||p.modifier==="*"){var v=p.modifier==="*"?"?":"";t+="(?:"+m+"((?:"+p.pattern+")(?:"+x+m+"(?:"+p.pattern+"))*)"+x+")"+v}else t+="(?:"+m+"("+p.pattern+")"+x+")"+p.modifier;else t+="("+p.pattern+")"+p.modifier;else t+="(?:"+m+x+")"+p.modifier}}if(o===void 0||o)s||(t+=f+"?"),t+=e.endsWith?"(?="+d+")":"$";else{var l=i[i.length-1],g=typeof l=="string"?f.indexOf(l[l.length-1])>-1:l===void 0;s||(t+="(?:"+f+"(?="+d+"))?"),g||(t+="(?="+f+"|"+d+")")}return RegExp(t,C(e))}function O(i,r,e){return i instanceof RegExp?H(i,r):Array.isArray(i)?I(i,r,e):S(i,r,e)}R.MY=M,R.WS=D,R.Bo=O};export{_ as default};
