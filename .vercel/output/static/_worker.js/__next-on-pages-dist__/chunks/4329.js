var _=(F,R)=>{"use strict";var W;function w(i){for(var r=[],e=0;e<i.length;){var f=i[e];if(f==="*"||f==="+"||f==="?"){r.push({type:"MODIFIER",index:e,value:i[e++]});continue}if(f==="\\"){r.push({type:"ESCAPED_CHAR",index:e++,value:i[e++]});continue}if(f==="{"){r.push({type:"OPEN",index:e,value:i[e++]});continue}if(f==="}"){r.push({type:"CLOSE",index:e,value:i[e++]});continue}if(f===":"){for(var s="",n=e+1;n<i.length;){var a=i.charCodeAt(n);if(a>=48&&a<=57||a>=65&&a<=90||a>=97&&a<=122||a===95){s+=i[n++];continue}break}if(!s)throw TypeError("Missing parameter name at "+e);r.push({type:"NAME",index:e,value:s}),e=n;continue}if(f==="("){var E=1,u="",n=e+1;if(i[n]==="?")throw TypeError('Pattern cannot start with "?" at '+n);for(;n<i.length;){if(i[n]==="\\"){u+=i[n++]+i[n++];continue}if(i[n]===")"){if(--E==0){n++;break}}else if(i[n]==="("&&(E++,i[n+1]!=="?"))throw TypeError("Capturing groups are not allowed at "+n);u+=i[n++]}if(E)throw TypeError("Unbalanced pattern at "+e);if(!u)throw TypeError("Missing pattern at "+e);r.push({type:"PATTERN",index:e,value:u}),e=n;continue}r.push({type:"CHAR",index:e,value:i[e++]})}return r.push({type:"END",index:e,value:""}),r}function N(i,r){r===void 0&&(r={});for(var e=w(i),f=r.prefixes,s=f===void 0?"./":f,n="[^"+y(r.delimiter||"/#?")+"]+?",a=[],E=0,u=0,d="",o=function(h){if(u<e.length&&e[u].type===h)return e[u++].value},t=function(h){var T=o(h);if(T!==void 0)return T;var b=e[u];throw TypeError("Unexpected "+b.type+" at "+b.index+", expected "+h)},c=function(){for(var h,T="";h=o("CHAR")||o("ESCAPED_CHAR");)T+=h;return T};u<e.length;){var p=o("CHAR"),m=o("NAME"),x=o("PATTERN");if(m||x){var v=p||"";s.indexOf(v)===-1&&(d+=v,v=""),d&&(a.push(d),d=""),a.push({name:m||E++,prefix:v,suffix:"",pattern:x||n,modifier:o("MODIFIER")||""});continue}var l=p||o("ESCAPED_CHAR");if(l){d+=l;continue}if(d&&(a.push(d),d=""),o("OPEN")){var v=c(),g=o("NAME")||"",A=o("PATTERN")||"",j=c();t("CLOSE"),a.push({name:g||(A?E++:""),pattern:g&&!A?n:A,prefix:v,suffix:j,modifier:o("MODIFIER")||""});continue}t("END")}return a}function M(i,r){return P(N(i,r),r)}function P(i,r){r===void 0&&(r={});var e=C(r),f=r.encode,s=f===void 0?function(u){return u}:f,n=r.validate,a=n===void 0||n,E=i.map(function(u){if(typeof u=="object")return RegExp("^(?:"+u.pattern+")$",e)});return function(u){for(var d="",o=0;o<i.length;o++){var t=i[o];if(typeof t=="string"){d+=t;continue}var c=u?u[t.name]:void 0,p=t.modifier==="?"||t.modifier==="*",m=t.modifier==="*"||t.modifier==="+";if(Array.isArray(c)){if(!m)throw TypeError('Expected "'+t.name+'" to not repeat, but got an array');if(c.length===0){if(p)continue;throw TypeError('Expected "'+t.name+'" to not be empty')}for(var x=0;x<c.length;x++){var v=s(c[x],t);if(a&&!E[o].test(v))throw TypeError('Expected all "'+t.name+'" to match "'+t.pattern+'", but got "'+v+'"');d+=t.prefix+v+t.suffix}continue}if(typeof c=="string"||typeof c=="number"){var v=s(String(c),t);if(a&&!E[o].test(v))throw TypeError('Expected "'+t.name+'" to match "'+t.pattern+'", but got "'+v+'"');d+=t.prefix+v+t.suffix;continue}if(!p){var l=m?"an array":"a string";throw TypeError('Expected "'+t.name+'" to be '+l)}}return d}}function D(i,r,e){e===void 0&&(e={});var f=e.decode,s=f===void 0?function(n){return n}:f;return function(n){var a=i.exec(n);if(!a)return!1;for(var E=a[0],u=a.index,d=Object.create(null),o=1;o<a.length;o++)(function(t){if(a[t]!==void 0){var c=r[t-1];c.modifier==="*"||c.modifier==="+"?d[c.name]=a[t].split(c.prefix+c.suffix).map(function(p){return s(p,c)}):d[c.name]=s(a[t],c)}})(o);return{path:E,index:u,params:d}}}function y(i){return i.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function C(i){return i&&i.sensitive?"":"i"}function H(i,r){if(!r)return i;var e=i.source.match(/\((?!\?)/g);if(e)for(var f=0;f<e.length;f++)r.push({name:f,prefix:"",suffix:"",modifier:"",pattern:""});return i}function I(i,r,e){return RegExp("(?:"+i.map(function(f){return O(f,r,e).source}).join("|")+")",C(e))}function S(i,r,e){return $(N(i,e),r,e)}function $(i,r,e){e===void 0&&(e={});for(var f=e.strict,s=f!==void 0&&f,n=e.start,a=e.end,E=e.encode,u=E===void 0?function(A){return A}:E,d="["+y(e.endsWith||"")+"]|$",o="["+y(e.delimiter||"/#?")+"]",t=n===void 0||n?"^":"",c=0;c<i.length;c++){var p=i[c];if(typeof p=="string")t+=y(u(p));else{var m=y(u(p.prefix)),x=y(u(p.suffix));if(p.pattern)if(r&&r.push(p),m||x)if(p.modifier==="+"||p.modifier==="*"){var v=p.modifier==="*"?"?":"";t+="(?:"+m+"((?:"+p.pattern+")(?:"+x+m+"(?:"+p.pattern+"))*)"+x+")"+v}else t+="(?:"+m+"("+p.pattern+")"+x+")"+p.modifier;else t+="("+p.pattern+")"+p.modifier;else t+="(?:"+m+x+")"+p.modifier}}if(a===void 0||a)s||(t+=o+"?"),t+=e.endsWith?"(?="+d+")":"$";else{var l=i[i.length-1],g=typeof l=="string"?o.indexOf(l[l.length-1])>-1:l===void 0;s||(t+="(?:"+o+"(?="+d+"))?"),g||(t+="(?="+o+"|"+d+")")}return RegExp(t,C(e))}function O(i,r,e){return i instanceof RegExp?H(i,r):Array.isArray(i)?I(i,r,e):S(i,r,e)}R.MY=M,R.WS=D,R.Bo=O};export{_ as default};
