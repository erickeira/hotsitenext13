var _=(W,C)=>{"use strict";var m;function S(e){for(var t=[],r=0;r<e.length;){var f=e[r];if(f==="*"||f==="+"||f==="?"){t.push({type:"MODIFIER",index:r,value:e[r++]});continue}if(f==="\\"){t.push({type:"ESCAPED_CHAR",index:r++,value:e[r++]});continue}if(f==="{"){t.push({type:"OPEN",index:r,value:e[r++]});continue}if(f==="}"){t.push({type:"CLOSE",index:r,value:e[r++]});continue}if(f===":"){for(var s="",n=r+1;n<e.length;){var a=e.charCodeAt(n);if(a>=48&&a<=57||a>=65&&a<=90||a>=97&&a<=122||a===95){s+=e[n++];continue}break}if(!s)throw TypeError("Missing parameter name at "+r);t.push({type:"NAME",index:r,value:s}),r=n;continue}if(f==="("){var h=1,u="",n=r+1;if(e[n]==="?")throw TypeError('Pattern cannot start with "?" at '+n);for(;n<e.length;){if(e[n]==="\\"){u+=e[n++]+e[n++];continue}if(e[n]===")"){if(--h==0){n++;break}}else if(e[n]==="("&&(h++,e[n+1]!=="?"))throw TypeError("Capturing groups are not allowed at "+n);u+=e[n++]}if(h)throw TypeError("Unbalanced pattern at "+r);if(!u)throw TypeError("Missing pattern at "+r);t.push({type:"PATTERN",index:r,value:u}),r=n;continue}t.push({type:"CHAR",index:r,value:e[r++]})}return t.push({type:"END",index:r,value:""}),t}function w(e,t){t===void 0&&(t={});for(var r=S(e),f=t.prefixes,s=f===void 0?"./":f,n="[^"+g(t.delimiter||"/#?")+"]+?",a=[],h=0,u=0,v="",o=function(y){if(u<r.length&&r[u].type===y)return r[u++].value},i=function(y){var T=o(y);if(T!==void 0)return T;var b=r[u];throw TypeError("Unexpected "+b.type+" at "+b.index+", expected "+y)},c=function(){for(var y,T="";y=o("CHAR")||o("ESCAPED_CHAR");)T+=y;return T};u<r.length;){var p=o("CHAR"),x=o("NAME"),E=o("PATTERN");if(x||E){var d=p||"";s.indexOf(d)===-1&&(v+=d,d=""),v&&(a.push(v),v=""),a.push({name:x||h++,prefix:d,suffix:"",pattern:E||n,modifier:o("MODIFIER")||""});continue}var l=p||o("ESCAPED_CHAR");if(l){v+=l;continue}if(v&&(a.push(v),v=""),o("OPEN")){var d=c(),R=o("NAME")||"",A=o("PATTERN")||"",F=c();i("CLOSE"),a.push({name:R||(A?h++:""),pattern:R&&!A?n:A,prefix:d,suffix:F,modifier:o("MODIFIER")||""});continue}i("END")}return a}function H(e,t){return M(w(e,t),t)}function M(e,t){t===void 0&&(t={});var r=N(t),f=t.encode,s=f===void 0?function(u){return u}:f,n=t.validate,a=n===void 0||n,h=e.map(function(u){if(typeof u=="object")return RegExp("^(?:"+u.pattern+")$",r)});return function(u){for(var v="",o=0;o<e.length;o++){var i=e[o];if(typeof i=="string"){v+=i;continue}var c=u?u[i.name]:void 0,p=i.modifier==="?"||i.modifier==="*",x=i.modifier==="*"||i.modifier==="+";if(Array.isArray(c)){if(!x)throw TypeError('Expected "'+i.name+'" to not repeat, but got an array');if(c.length===0){if(p)continue;throw TypeError('Expected "'+i.name+'" to not be empty')}for(var E=0;E<c.length;E++){var d=s(c[E],i);if(a&&!h[o].test(d))throw TypeError('Expected all "'+i.name+'" to match "'+i.pattern+'", but got "'+d+'"');v+=i.prefix+d+i.suffix}continue}if(typeof c=="string"||typeof c=="number"){var d=s(String(c),i);if(a&&!h[o].test(d))throw TypeError('Expected "'+i.name+'" to match "'+i.pattern+'", but got "'+d+'"');v+=i.prefix+d+i.suffix;continue}if(!p){var l=x?"an array":"a string";throw TypeError('Expected "'+i.name+'" to be '+l)}}return v}}function P(e,t,r){r===void 0&&(r={});var f=r.decode,s=f===void 0?function(n){return n}:f;return function(n){var a=e.exec(n);if(!a)return!1;for(var h=a[0],u=a.index,v=Object.create(null),o=1;o<a.length;o++)(function(i){if(a[i]!==void 0){var c=t[i-1];c.modifier==="*"||c.modifier==="+"?v[c.name]=a[i].split(c.prefix+c.suffix).map(function(p){return s(p,c)}):v[c.name]=s(a[i],c)}})(o);return{path:h,index:u,params:v}}}function g(e){return e.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function N(e){return e&&e.sensitive?"":"i"}function I(e,t){if(!t)return e;var r=e.source.match(/\((?!\?)/g);if(r)for(var f=0;f<r.length;f++)t.push({name:f,prefix:"",suffix:"",modifier:"",pattern:""});return e}function $(e,t,r){return RegExp("(?:"+e.map(function(f){return O(f,t,r).source}).join("|")+")",N(r))}function j(e,t,r){return D(w(e,r),t,r)}function D(e,t,r){r===void 0&&(r={});for(var f=r.strict,s=f!==void 0&&f,n=r.start,a=r.end,h=r.encode,u=h===void 0?function(A){return A}:h,v="["+g(r.endsWith||"")+"]|$",o="["+g(r.delimiter||"/#?")+"]",i=n===void 0||n?"^":"",c=0;c<e.length;c++){var p=e[c];if(typeof p=="string")i+=g(u(p));else{var x=g(u(p.prefix)),E=g(u(p.suffix));if(p.pattern)if(t&&t.push(p),x||E)if(p.modifier==="+"||p.modifier==="*"){var d=p.modifier==="*"?"?":"";i+="(?:"+x+"((?:"+p.pattern+")(?:"+E+x+"(?:"+p.pattern+"))*)"+E+")"+d}else i+="(?:"+x+"("+p.pattern+")"+E+")"+p.modifier;else i+="("+p.pattern+")"+p.modifier;else i+="(?:"+x+E+")"+p.modifier}}if(a===void 0||a)s||(i+=o+"?"),i+=r.endsWith?"(?="+v+")":"$";else{var l=e[e.length-1],R=typeof l=="string"?o.indexOf(l[l.length-1])>-1:l===void 0;s||(i+="(?:"+o+"(?="+v+"))?"),R||(i+="(?="+o+"|"+v+")")}return RegExp(i,N(r))}function O(e,t,r){return e instanceof RegExp?I(e,t):Array.isArray(e)?$(e,t,r):j(e,t,r)}m={value:!0},m=w,C.MY=H,m=M,m=function(e,t){var r=[];return P(O(e,r,t),r,t)},C.WS=P,m=D,C.Bo=O};export{_ as default};
