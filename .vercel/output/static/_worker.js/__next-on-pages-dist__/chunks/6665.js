var se=(ee,E,o)=>{"use strict";o.d(E,{Z:()=>Q});var e=o(5893),n=o(7294),B=o(1664),k=o(5675),q=o(8447),M=o(4616);let T={src:"/_next/static/media/place.6b3bd91d.svg",height:49,width:34,blurWidth:0,blurHeight:0};var z=o(4398),u=o(1371),d=o(3547);let v={menuPortal:r=>({...r,zIndex:9999,fontSize:14}),menuList:r=>({...r,"::-webkit-scrollbar":{width:"4px",height:"0px"},"::-webkit-scrollbar-track":{background:"#f1f1f1"},"::-webkit-scrollbar-thumb":{background:"#888"},"::-webkit-scrollbar-thumb:hover":{background:"#555"}})};function J(r){let{valores:g,formulario:l,estados:h,arrayFinalidades:j,tipoimoveis:b,cidades:N,bairro:P,handleOptionChange:c,mudarDadosFormulario:R,handleSubmit:C,loading:w}=r,{valor_minimo:y,valor_maximo:f}=g;return(0,e.jsx)("div",{className:"d-none d-md-block searchbox mt-2 mt-md-5 ",children:(0,e.jsxs)("div",{className:"row shadow mx-0 p-4",children:[(0,e.jsx)("div",{className:"col-3",children:(0,e.jsx)(u.ZP,{className:"select",classNamePrefix:"react-select",value:j.find(s=>s.value==l.finalidade?l.finalidade:""),placeholder:"FINALIDADE",onChange:s=>c("finalidade",s.value),options:j,styles:v})}),(0,e.jsx)("div",{className:"col-3",children:(0,e.jsx)(u.ZP,{className:"select",classNamePrefix:"react-select",value:b.find(s=>s.value==l.tipo),placeholder:"TIPO IM\xD3VEL",onChange:s=>c("tipo",s.value),options:b,styles:v})}),(0,e.jsx)("div",{className:"col-2",children:(0,e.jsx)(u.ZP,{className:"select",classNamePrefix:"react-select",value:h.find(s=>s.value==l.uf),placeholder:"UF",onChange:s=>c("uf",s.value),options:h,styles:v})}),(0,e.jsx)("div",{className:"col-4",children:(0,e.jsx)(u.ZP,{className:"select",classNamePrefix:"react-select",value:N?.find(s=>s.value==l.cidade),placeholder:"CIDADE",onChange:s=>c("cidade",s.value),options:N,noOptionsMessage:()=>"Selecione",styles:v})}),(0,e.jsx)("div",{className:"col-3 pt-3",children:(0,e.jsx)(u.ZP,{className:"select",classNamePrefix:"react-select",value:P?.find(s=>s.value==l.bairro),placeholder:"BAIRRO",onChange:s=>c("bairro",s.value),options:P,noOptionsMessage:()=>"Selecione",styles:v})}),(0,e.jsxs)("div",{className:"col-5 pt-3",children:[(0,e.jsx)("label",{className:"d-block  imputValorDesejadoB font-14 select pb-3 ms-3",children:"VALOR DESEJADO"}),(0,e.jsxs)("div",{children:[(0,e.jsx)(z.Range,{min:parseInt(y),max:parseInt(f),values:[l.valorde||y||0,l.valorate||f||100],allowCross:!1,allowOverlap:!0,onChange:s=>R({valorde:s[0],valorate:s[1]}),renderTrack:({props:s,children:t})=>(0,e.jsx)("div",{...s,style:{...s.style,height:"6px",width:"100%",backgroundColor:"#ccc"},children:t}),renderThumb:({props:s})=>(0,e.jsx)("div",{...s,style:{...s.style,height:"20px",width:"20px",borderRadius:"5px",backgroundColor:"#48AAF0"}})}),(0,e.jsxs)("div",{className:"d-flex justify-content-between font-12 pt-3 pb-1 text-center",children:[(0,e.jsxs)("div",{children:["R$ ",(0,d.ed)(l.valorde||y||0)]}),(0,e.jsxs)("div",{children:["R$ ",(0,d.ed)(l.valorate||f||0)]})]})]})]}),(0,e.jsx)("div",{className:"col-3 pt-4 ms-5",children:(0,e.jsxs)("button",{type:"button",className:"btn btn-primary font-14 w-100 py-2",onClick:()=>C(),disabled:!!w,children:[w&&(0,e.jsx)("span",{className:"spinner-border spinner-border-sm mr-2",role:"status","aria-hidden":"true"}),w?"BUSCANDO":"BUSCAR AGORA"]})})]})})}var H=o(9874),G=o(1163);function x(r){return(0,e.jsx)("div",{className:`skeleton-root ${r.className&&r.className}`,style:{width:r.width,height:r.height}})}function Q(r){let g=(0,G.useRouter)(),l=g.query,{finalidadePagina:h}=r,[j,b]=(0,n.useState)(!0),[N,P]=(0,n.useState)([]),[c,R]=(0,n.useState)(""),{finalidades:C,tipoimoveis:w,estados:y,valores:f,setValores:s}=(0,n.useContext)(H.V),[t,m]=(0,n.useState)({finalidade:h||""}),[ae,I]=(0,n.useState)(!0),[S,O]=(0,n.useState)(!0),[W,D]=(0,n.useState)([]),[K,A]=(0,n.useState)([]),X=C.map(a=>({value:a,label:a}));async function Y(){m({...t,...l}),(l.uf||l.cidade)&&(l.uf&&await _(l.uf),l.cidade&&await $(l.cidade)),I(!1)}(0,n.useEffect)(()=>{h&&L(t),I(!1),b(!0)},[]),(0,n.useEffect)(()=>{Object.keys(l).length&&(Y(),L(l),b(!0))},[l]);let L=async a=>{O(!0);let i={};i=a?JSON.stringify({...a}):JSON.stringify({...t});let p=await fetch("api/getBusca",{method:"POST",body:i});h&&F("finalidade",h);let Z=await p.json();P(Z.busca.imoveis),R(Z.busca.total_registros),O(!1)};async function _(a){let i=await(0,d.P6)("cidades",a);D(i.cidades)}async function $(a){let i=await(0,d.P6)("bairros",a);A(i.bairros)}async function F(a,i){switch(a){case"finalidade":let p=await(0,d.VQ)(i);s({...f,valor_minimo:parseInt(p.valor_minimo),valor_maximo:parseInt(p.valor_maximo)}),m({...t,finalidade:i,valorde:parseInt(p.valor_minimo),valorate:parseInt(p.valor_maximo),bairro:"",cidade:"",uf:"",tipo:""});break;case"tipo":m({...t,tipo:i});break;case"uf":m({...t,uf:i}),D([{value:"",label:"Carregando"}]),_(i);break;case"cidade":m({...t,cidade:i}),A([{value:"",label:"Carregando"}]),$(i);break;case"bairro":m({...t,bairro:i});break;case"valorde":m({...t,valorde:i});break;case"valorate":m({...t,valorate:i})}}async function U(a){O(!0),g.push({pathname:"/busca",query:{...t,pg:1,...a}},void 0,{shallow:!0})}let V=[];for(let a=0;a<d.Pp;a++)V[a]=a;return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)("div",{className:"main",children:[(0,e.jsx)(M.Z,{title:h||"Resultado da Busca",formulario:t,noSearch:!0}),(0,e.jsxs)("div",{className:"container px-4 px-sm-0",children:[(0,e.jsx)(J,{loadingDados:!1,loading:S,finalidade:C,arrayFinalidades:X,tipoimoveis:w,formulario:t,estados:y,cidades:W,bairro:K,valores:f,handleOptionChange:(a,i)=>F(a,i),mudarDadosFormulario:a=>{m({...t,...a})},handleSubmit:()=>U()}),S&&j&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("header",{className:`${j?"d-flex ":"d-none "}justify-content-between align-items-md-center flex-column flex-md-row pt-2 pt-md-5`,children:[(0,e.jsx)(x,{width:195,height:27,className:"d-none d-md-block"}),(0,e.jsx)(x,{width:200,height:38})]}),(0,e.jsx)("div",{className:"row pt-2 pb-5",children:V.map((a,i)=>(0,e.jsx)("div",{className:"col-12 col-md-6 col-xl-3 py-4",children:(0,e.jsxs)("div",{className:"d-flex flex-column shadow h-100 item-grid",children:[(0,e.jsx)("div",{className:"foto position-relative",children:(0,e.jsx)(x,{className:"skeleton-absolute"})}),(0,e.jsxs)("div",{className:"d-flex flex-grow-1 flex-column px-3 py-3",children:[(0,e.jsxs)("div",{className:"flex-grow-2",children:[(0,e.jsx)(x,{width:100,height:12}),(0,e.jsx)(x,{className:"mt-1",width:120,height:24})]}),(0,e.jsx)("div",{className:"d-flex infos flex-grow-1 align-items-center py-3",children:(0,e.jsx)(x,{width:177,height:11})}),(0,e.jsx)("div",{className:"endereco font-12 line-height-130 pl-0",children:(0,e.jsx)(x,{width:200,height:32})})]})]})},i))})]}),!S&&N?.length>0?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("header",{className:"d-flex topo-grid justify-content-between align-items-md-center flex-column flex-md-row pt-2 pt-md-5",children:[(0,e.jsx)("div",{className:"d-none d-md-block font-14 font-md-18 qtde pr-5",children:(0,e.jsx)("b",{className:"pr-2",children:c>1?`${c} im\xF3veis`:`${c} im\xF3vel`})}),(0,e.jsx)("div",{children:(0,e.jsx)(u.ZP,{className:"select filtro filtroOrdenar",classNamePrefix:"react-select",defaultInputValue:"",onChange:a=>U({ordenacao:a.value}),name:"",placeholder:"Ordenar",options:[{label:"Ordena\xE7\xE3o",value:""},{label:"Recentes",value:"recentes"},{label:"Relev\xE2ncia",value:"relevancia"},{label:"Menor Valor",value:"menorvalor"},{label:"Maior Valor",value:"maiorvalor"}],styles:{menu:a=>({...a,zIndex:10})}})})]}),(0,e.jsx)("div",{className:"row pt-2 pb-5",children:N.map(a=>(0,e.jsx)("div",{className:"col-12 col-md-6 col-xl-3 py-4",children:(0,e.jsxs)(B.default,{href:`/imovel/${a.id}`,className:"d-flex flex-column shadow h-100 item-grid",children:[(0,e.jsxs)("div",{className:"foto position-relative",children:[a.imagem?(0,e.jsx)(k.default,{src:a.imagem,loader:d.O,alt:a.tipo,width:"290",height:"100",blurDataURL:"URL",placeholder:"blur"}):"",!a.imagem&&a.maisimagens?(0,e.jsx)(k.default,{src:"/img/sm-1foto.jpg",alt:a.tipo,width:"290",height:"100",blurDataURL:"URL",placeholder:"blur"}):"",a.imagem||a.maisimagens?"":(0,e.jsx)(k.default,{src:"/img/sm-foto.jpg",alt:a.tipo,width:"290",height:"100",blurDataURL:"URL",placeholder:"blur"})]}),(0,e.jsxs)("div",{className:"d-flex flex-grow-1 flex-column px-3 py-3",children:[(0,e.jsxs)("div",{className:"flex-grow-2",children:[(0,e.jsxs)("div",{className:"font-12 font-md-11 line-height-100",children:[a.finalidade,a.tipo&&(0,e.jsxs)("small",{className:"ml-1 font-italic opacity-50 espa\xE7o-card-destaque",children:["(",a.tipo,")"]})]}),(0,e.jsx)("div",{className:"font-20 color-primary",children:a.valor?(0,e.jsxs)("b",{children:["R$ ",(0,d.ed)(a.valor)]}):(0,e.jsx)("b",{children:"Consulte-nos"})}),a.valor_condominio&&(0,e.jsxs)("div",{className:"font-12 font-md-11 line-height-100",children:["Condom\xEDnio: R$ ",(0,d.ed)(a.valor_condominio)]})]}),(0,e.jsx)("div",{className:"d-flex infos flex-grow-1 align-items-center py-3",children:(0,e.jsxs)("div",{className:"d-flex",children:[a.dormitorios!=0&&(0,e.jsx)("div",{className:"info info-dormitorios font-12 font-md-11 line-height-100 pr-3",children:(0,e.jsx)("div",{children:a.dormitorios})}),a.banheiros!=0&&(0,e.jsx)("div",{className:"info info-banheiros font-12 font-md-11 line-height-100 pr-3",children:(0,e.jsx)("div",{children:a.banheiros})}),a.area!=0&&(0,e.jsx)("div",{className:"info info-area font-12 font-md-11 line-height-100 pr-3",children:(0,e.jsxs)("div",{children:[a.area," m",(0,e.jsx)("sup",{children:"2"})]})})]})}),(0,e.jsxs)("div",{className:"endereco font-12 line-height-130",children:[(0,e.jsx)(k.default,{src:T,loader:d.L7,alt:"place",width:"290",height:"100"}),`${a.bairro} | ${a.cidade}/${a.uf}`]})]})]})},a.id))}),c>d.Pp&&(0,e.jsx)("div",{className:"d-flex justify-content-center pt-2 pb-5 pagination-container",children:(0,e.jsx)(q.Z,{hideFirstLastPages:!0,activePage:parseInt(l.pg)?parseInt(l.pg):1,itemsCountPerPage:d.Pp,totalItemsCount:c,pageRangeDisplayed:5,onChange:a=>{g.push({pathname:"/busca",query:{...t,pg:a}})}})})]}):(0,e.jsx)("div",{className:"text-center py-5 my-5 font-32 opacity-50",children:"Nenhum im\xF3vel encontrado"})]})]})})}};export{se as default};
