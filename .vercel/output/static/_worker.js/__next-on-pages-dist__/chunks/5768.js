var P=f=>{"use strict";var p=Object.defineProperty,d=Object.getOwnPropertyDescriptor,g=Object.getOwnPropertyNames,y=Object.prototype.hasOwnProperty,v=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of g(t))y.call(e,s)||s===r||p(e,s,{get:()=>t[s],enumerable:!(n=d(t,s))||n.enumerable});return e},_=e=>v(p({},"__esModule",{value:!0}),e),m={};function l(e){let t=["path"in e&&e.path&&`Path=${e.path}`,"expires"in e&&e.expires&&`Expires=${e.expires.toUTCString()}`,"maxAge"in e&&e.maxAge&&`Max-Age=${e.maxAge}`,"domain"in e&&e.domain&&`Domain=${e.domain}`,"secure"in e&&e.secure&&"Secure","httpOnly"in e&&e.httpOnly&&"HttpOnly","sameSite"in e&&e.sameSite&&`SameSite=${e.sameSite}`].filter(Boolean);return`${e.name}=${encodeURIComponent(e.value??"")}; ${t.join("; ")}`}function h(e){let t=new Map;for(let r of e.split(/; */)){if(!r)continue;let n=r.indexOf("="),[s,i]=[r.slice(0,n),r.slice(n+1)];try{t.set(s,decodeURIComponent(i??"true"))}catch{}}return t}function A(e){if(!e)return;let[[t,r],...n]=h(e),{domain:s,expires:i,httponly:o,maxage:a,path:u,samesite:c,secure:C}=Object.fromEntries(n.map(([D,M])=>[D.toLowerCase(),M])),R={name:t,value:decodeURIComponent(r),domain:s,...i&&{expires:new Date(i)},...o&&{httpOnly:!0},...typeof a=="string"&&{maxAge:Number(a)},path:u,...c&&{sameSite:O(c)},...C&&{secure:!0}};return x(R)}function x(e){let t={};for(let r in e)e[r]&&(t[r]=e[r]);return t}((e,t)=>{for(var r in t)p(e,r,{get:t[r],enumerable:!0})})(m,{RequestCookies:()=>S,ResponseCookies:()=>j}),f.exports=_(m);var b=["strict","lax","none"];function O(e){return e=e.toLowerCase(),b.includes(e)?e:void 0}var S=class{constructor(e){this._parsed=new Map,this._headers=e;let t=e.get("cookie");if(t){let r=h(t);for(let[n,s]of r)this._parsed.set(n,{name:n,value:s})}}[Symbol.iterator](){return this._parsed[Symbol.iterator]()}get size(){return this._parsed.size}get(...e){let t=typeof e[0]=="string"?e[0]:e[0].name;return this._parsed.get(t)}getAll(...e){var t;let r=Array.from(this._parsed);if(!e.length)return r.map(([s,i])=>i);let n=typeof e[0]=="string"?e[0]:(t=e[0])==null?void 0:t.name;return r.filter(([s])=>s===n).map(([s,i])=>i)}has(e){return this._parsed.has(e)}set(...e){let[t,r]=e.length===1?[e[0].name,e[0].value]:e,n=this._parsed;return n.set(t,{name:t,value:r}),this._headers.set("cookie",Array.from(n).map(([s,i])=>l(i)).join("; ")),this}delete(e){let t=this._parsed,r=Array.isArray(e)?e.map(n=>t.delete(n)):t.delete(e);return this._headers.set("cookie",Array.from(t).map(([n,s])=>l(s)).join("; ")),r}clear(){return this.delete(Array.from(this._parsed.keys())),this}[Symbol.for("edge-runtime.inspect.custom")](){return`RequestCookies ${JSON.stringify(Object.fromEntries(this._parsed))}`}toString(){return[...this._parsed.values()].map(e=>`${e.name}=${encodeURIComponent(e.value)}`).join("; ")}},j=class{constructor(e){var t;this._parsed=new Map,this._headers=e;let r=((t=e.getAll)==null?void 0:t.call(e,"set-cookie"))??e.get("set-cookie")??[],n=Array.isArray(r)?r:$(r);for(let s of n){let i=A(s);i&&this._parsed.set(i.name,i)}}get(...e){let t=typeof e[0]=="string"?e[0]:e[0].name;return this._parsed.get(t)}getAll(...e){var t;let r=Array.from(this._parsed.values());if(!e.length)return r;let n=typeof e[0]=="string"?e[0]:(t=e[0])==null?void 0:t.name;return r.filter(s=>s.name===n)}set(...e){let[t,r,n]=e.length===1?[e[0].name,e[0].value,e[0]]:e,s=this._parsed;return s.set(t,k({name:t,value:r,...n})),w(s,this._headers),this}delete(...e){let t=typeof e[0]=="string"?e[0]:e[0].name;return this.set({name:t,value:"",expires:new Date(0)})}[Symbol.for("edge-runtime.inspect.custom")](){return`ResponseCookies ${JSON.stringify(Object.fromEntries(this._parsed))}`}toString(){return[...this._parsed.values()].map(l).join("; ")}};function w(e,t){for(let[,r]of(t.delete("set-cookie"),e)){let n=l(r);t.append("set-cookie",n)}}function k(e={name:"",value:""}){return e.maxAge&&(e.expires=new Date(Date.now()+1e3*e.maxAge)),(e.path===null||e.path===void 0)&&(e.path="/"),e}function $(e){if(!e)return[];var t,r,n,s,i,o=[],a=0;function u(){for(;a<e.length&&/\s/.test(e.charAt(a));)a+=1;return a<e.length}for(;a<e.length;){for(t=a,i=!1;u();)if((r=e.charAt(a))===","){for(n=a,a+=1,u(),s=a;a<e.length&&(r=e.charAt(a))!=="="&&r!==";"&&r!==",";)a+=1;a<e.length&&e.charAt(a)==="="?(i=!0,a=s,o.push(e.substring(t,n)),t=a):a=n+1}else a+=1;(!i||a>=e.length)&&o.push(e.substring(t,e.length))}return o}};export{P as default};
