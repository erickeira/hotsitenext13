var he=(le,k,d)=>{"use strict";d.d(k,{V:()=>se,g:()=>ne});class m extends Error{constructor({page:e}){super(`The middleware "${e}" accepts an async API directly with the form:
  
  export function middleware(request, event) {
    return NextResponse.redirect('/new-location')
  }
  
  Read more: https://nextjs.org/docs/messages/middleware-new-signature
  `)}}class $ extends Error{constructor(){super("The request.page has been deprecated in favour of `URLPattern`.\n  Read more: https://nextjs.org/docs/messages/middleware-request-page\n  ")}}class I extends Error{constructor(){super("The request.ua has been removed in favour of `userAgent` function.\n  Read more: https://nextjs.org/docs/messages/middleware-parse-user-agent\n  ")}}function E(t){let e=new Headers;for(let[r,s]of Object.entries(t)){let n=Array.isArray(s)?s:[s];for(let o of n)o!==void 0&&e.append(r,o)}return e}function O(t){var e,r,s,n,o,l=[],a=0;function h(){for(;a<t.length&&/\s/.test(t.charAt(a));)a+=1;return a<t.length}for(;a<t.length;){for(e=a,o=!1;h();)if((r=t.charAt(a))===","){for(s=a,a+=1,h(),n=a;a<t.length&&(r=t.charAt(a))!=="="&&r!==";"&&r!==",";)a+=1;a<t.length&&t.charAt(a)==="="?(o=!0,a=n,l.push(t.substring(e,s)),e=a):a=s+1}else a+=1;(!o||a>=t.length)&&l.push(t.substring(e,t.length))}return l}function P(t){let e={};if(t)for(let[r,s]of t.entries())e[r]=s,r.toLowerCase()==="set-cookie"&&(e[r]=O(s));return e}function y(t){try{return String(new URL(String(t)))}catch(e){throw Error(`URL is malformed "${String(t)}". Please use only absolute URLs - https://nextjs.org/docs/messages/middleware-relative-urls`,{cause:e})}}let L=Symbol("response"),q=Symbol("passThrough"),b=Symbol("waitUntil");class T{[b]=[];[q]=!1;constructor(e){}respondWith(e){this[L]||(this[L]=Promise.resolve(e))}passThroughOnException(){this[q]=!0}waitUntil(e){this[b].push(e)}}class D extends T{constructor(e){super(e.request),this.sourcePage=e.page}get request(){throw new m({page:this.sourcePage})}respondWith(){throw new m({page:this.sourcePage})}}var N=d(3208),H=d(7447),M=d(6936),W=d(5860);let U=/(?!^https?:\/\/)(127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}|::1|localhost)/;function C(t,e){return new URL(String(t).replace(U,"localhost"),e&&String(e).replace(U,"localhost"))}let i=Symbol("NextURLInternal");class c{constructor(e,r,s){let n,o;typeof r=="object"&&"pathname"in r||typeof r=="string"?(n=r,o=s||{}):o=s||r||{},this[i]={url:C(e,n??o.base),options:o,basePath:""},this.analyzeUrl()}analyzeUrl(){var e,r,s,n,o;let l=(0,W.a)(this[i].url.pathname,{nextConfig:this[i].options.nextConfig,parseData:!0});this[i].domainLocale=(0,N.D)((e=this[i].options.nextConfig)==null||(r=e.i18n)==null?void 0:r.domains,(0,M.F)(this[i].url,this[i].options.headers));let a=((s=this[i].domainLocale)==null?void 0:s.defaultLocale)||((n=this[i].options.nextConfig)==null||(o=n.i18n)==null?void 0:o.defaultLocale);this[i].url.pathname=l.pathname,this[i].defaultLocale=a,this[i].basePath=l.basePath??"",this[i].buildId=l.buildId,this[i].locale=l.locale??a,this[i].trailingSlash=l.trailingSlash}formatPathname(){return(0,H.R)({basePath:this[i].basePath,buildId:this[i].buildId,defaultLocale:this[i].options.forceLocale?void 0:this[i].defaultLocale,locale:this[i].locale,pathname:this[i].url.pathname,trailingSlash:this[i].trailingSlash})}formatSearch(){return this[i].url.search}get buildId(){return this[i].buildId}set buildId(e){this[i].buildId=e}get locale(){return this[i].locale??""}set locale(e){var r,s;if(!this[i].locale||!(!((r=this[i].options.nextConfig)==null||(s=r.i18n)==null)&&s.locales.includes(e)))throw TypeError(`The NextURL configuration includes no locale "${e}"`);this[i].locale=e}get defaultLocale(){return this[i].defaultLocale}get domainLocale(){return this[i].domainLocale}get searchParams(){return this[i].url.searchParams}get host(){return this[i].url.host}set host(e){this[i].url.host=e}get hostname(){return this[i].url.hostname}set hostname(e){this[i].url.hostname=e}get port(){return this[i].url.port}set port(e){this[i].url.port=e}get protocol(){return this[i].url.protocol}set protocol(e){this[i].url.protocol=e}get href(){let e=this.formatPathname(),r=this.formatSearch();return`${this.protocol}//${this.host}${e}${r}${this.hash}`}set href(e){this[i].url=C(e),this.analyzeUrl()}get origin(){return this[i].url.origin}get pathname(){return this[i].url.pathname}set pathname(e){this[i].url.pathname=e}get hash(){return this[i].url.hash}set hash(e){this[i].url.hash=e}get search(){return this[i].url.search}set search(e){this[i].url.search=e}get password(){return this[i].url.password}set password(e){this[i].url.password=e}get username(){return this[i].url.username}set username(e){this[i].url.username=e}get basePath(){return this[i].basePath}set basePath(e){this[i].basePath=e.startsWith("/")?e:`/${e}`}toString(){return this.href}toJSON(){return this.href}[Symbol.for("edge-runtime.inspect.custom")](){return{href:this.href,origin:this.origin,protocol:this.protocol,username:this.username,password:this.password,host:this.host,hostname:this.hostname,port:this.port,pathname:this.pathname,search:this.search,searchParams:this.searchParams,hash:this.hash}}clone(){return new c(String(this),this[i].options)}}let F=["strict","lax","none"];function z(t){return t=t.toLowerCase(),F.includes(t)?t:void 0}function B(t){let e={};for(let r in t)t[r]&&(e[r]=t[r]);return e}function v(t){let e=["path"in t&&t.path&&`Path=${t.path}`,"expires"in t&&t.expires&&`Expires=${t.expires.toUTCString()}`,"maxAge"in t&&t.maxAge&&`Max-Age=${t.maxAge}`,"domain"in t&&t.domain&&`Domain=${t.domain}`,"secure"in t&&t.secure&&"Secure","httpOnly"in t&&t.httpOnly&&"HttpOnly","sameSite"in t&&t.sameSite&&`SameSite=${t.sameSite}`].filter(Boolean);return`${t.name}=${encodeURIComponent(t.value??"")}; ${e.join("; ")}`}function R(t){let e=new Map;for(let r of t.split(/; */)){if(!r)continue;let[s,n]=r.split("=",2);e.set(s,decodeURIComponent(n??"true"))}return e}function J(t){if(!t)return;let[[e,r],...s]=R(t),{domain:n,expires:o,httponly:l,maxage:a,path:h,samesite:f,secure:x}=Object.fromEntries(s.map(([oe,ae])=>[oe.toLowerCase(),ae])),u={name:e,value:decodeURIComponent(r),domain:n,...o&&{expires:new Date(o)},...l&&{httpOnly:!0},...typeof a=="string"&&{maxAge:Number(a)},path:h,...f&&{sameSite:z(f)},...x&&{secure:!0}};return B(u)}class V{_parsed=new Map;constructor(e){this._headers=e;let r=e.get("cookie");if(r){let s=R(r);for(let[n,o]of s)this._parsed.set(n,{name:n,value:o})}}[Symbol.iterator](){return this._parsed[Symbol.iterator]()}get size(){return this._parsed.size}get(...e){let r=typeof e[0]=="string"?e[0]:e[0].name;return this._parsed.get(r)}getAll(...e){var r;let s=Array.from(this._parsed);if(!e.length)return s.map(([o,l])=>l);let n=typeof e[0]=="string"?e[0]:(r=e[0])==null?void 0:r.name;return s.filter(([o])=>o===n).map(([o,l])=>l)}has(e){return this._parsed.has(e)}set(...e){let[r,s]=e.length===1?[e[0].name,e[0].value]:e,n=this._parsed;return n.set(r,{name:r,value:s}),this._headers.set("cookie",Array.from(n).map(([o,l])=>v(l)).join("; ")),this}delete(e){let r=this._parsed,s=Array.isArray(e)?e.map(n=>r.delete(n)):r.delete(e);return this._headers.set("cookie",Array.from(r).map(([n,o])=>v(o)).join("; ")),s}clear(){return this.delete(Array.from(this._parsed.keys())),this}[Symbol.for("edge-runtime.inspect.custom")](){return`RequestCookies ${JSON.stringify(Object.fromEntries(this._parsed))}`}}function G(t,e){for(let[,r]of(e.delete("set-cookie"),t)){let s=v(r);e.append("set-cookie",s)}}function Q(t={name:"",value:""}){return t.maxAge&&(t.expires=new Date(Date.now()+1e3*t.maxAge)),(t.path===null||t.path===void 0)&&(t.path="/"),t}class Z{_parsed=new Map;constructor(e){this._headers=e;let r=this._headers.getAll("set-cookie");for(let s of r){let n=J(s);n&&this._parsed.set(n.name,n)}}get(...e){let r=typeof e[0]=="string"?e[0]:e[0].name;return this._parsed.get(r)}getAll(...e){var r;let s=Array.from(this._parsed.values());if(!e.length)return s;let n=typeof e[0]=="string"?e[0]:(r=e[0])==null?void 0:r.name;return s.filter(o=>o.name===n)}set(...e){let[r,s,n]=e.length===1?[e[0].name,e[0].value,e[0]]:e,o=this._parsed;return o.set(r,Q({name:r,value:s,...n})),G(o,this._headers),this}delete(...e){let r=typeof e[0]=="string"?e[0]:e[0].name;return this.set({name:r,value:"",expires:new Date(0)})}[Symbol.for("edge-runtime.inspect.custom")](){return`ResponseCookies ${JSON.stringify(Object.fromEntries(this._parsed))}`}}let p=Symbol("internal request");class K extends Request{constructor(e,r={}){let s=typeof e!="string"&&"url"in e?e.url:String(e);y(s),super(s,r),this[p]={cookies:new V(this.headers),geo:r.geo||{},ip:r.ip,url:new c(s,{headers:P(this.headers),nextConfig:r.nextConfig})}}[Symbol.for("edge-runtime.inspect.custom")](){return{cookies:this.cookies,geo:this.geo,ip:this.ip,nextUrl:this.nextUrl,url:this.url,bodyUsed:this.bodyUsed,cache:this.cache,credentials:this.credentials,destination:this.destination,headers:Object.fromEntries(this.headers),integrity:this.integrity,keepalive:this.keepalive,method:this.method,mode:this.mode,redirect:this.redirect,referrer:this.referrer,referrerPolicy:this.referrerPolicy,signal:this.signal}}get cookies(){return this[p].cookies}get geo(){return this[p].geo}get ip(){return this[p].ip}get nextUrl(){return this[p].url}get page(){throw new $}get ua(){throw new I}get url(){return this[p].url.toString()}}let A=Symbol("internal response"),X=new Set([301,302,303,307,308]);function _(t,e){var r;if(!(t==null||(r=t.request)==null)&&r.headers){if(!(t.request.headers instanceof Headers))throw Error("request.headers must be an instance of Headers");let s=[];for(let[n,o]of t.request.headers)e.set("x-middleware-request-"+n,o),s.push(n);e.set("x-middleware-override-headers",s.join(","))}}class g extends Response{constructor(e,r={}){super(e,r),this[A]={cookies:new Z(this.headers),url:r.url?new c(r.url,{headers:P(this.headers),nextConfig:r.nextConfig}):void 0}}[Symbol.for("edge-runtime.inspect.custom")](){return{cookies:this.cookies,url:this.url,body:this.body,bodyUsed:this.bodyUsed,headers:Object.fromEntries(this.headers),ok:this.ok,redirected:this.redirected,status:this.status,statusText:this.statusText,type:this.type}}get cookies(){return this[A].cookies}static json(e,r){let s=Response.json(e,r);return new g(s.body,s)}static redirect(e,r){let s=typeof r=="number"?r:r?.status??307;if(!X.has(s))throw RangeError('Failed to execute "redirect" on "response": Invalid status code');let n=typeof r=="object"?r:{},o=new Headers(n?.headers);return o.set("Location",y(e)),new g(null,{...n,headers:o,status:s})}static rewrite(e,r){let s=new Headers(r?.headers);return s.set("x-middleware-rewrite",y(e)),_(r,s),new g(null,{...r,headers:s})}static next(e){let r=new Headers(e?.headers);return r.set("x-middleware-next","1"),_(e,r),new g(null,{...e,headers:r})}}function j(t,e){let r=typeof e=="string"?new URL(e):e,s=new URL(t,e),n=`${r.protocol}//${r.host}`;return`${s.protocol}//${s.host}`===n?s.toString().replace(n,""):s.toString()}var Y=d(4127),ee=d(4678),w=d(7136);class te extends K{constructor(e){super(e.input,e.init),this.sourcePage=e.page}get request(){throw new m({page:this.sourcePage})}respondWith(){throw new m({page:this.sourcePage})}waitUntil(){throw new m({page:this.sourcePage})}}let re=[[w.i4],[w.ph],[w.pz],[w.yR]];async function se(t){let e=self.__BUILD_MANIFEST!==void 0;t.request.url=(0,ee.W)(t.request.url,!0);let r=new c(t.request.url,{headers:t.request.headers,nextConfig:t.request.nextConfig}),s=r.buildId;r.buildId="";let n=t.request.headers["x-nextjs-data"];n&&r.pathname==="/index"&&(r.pathname="/");let o=E(t.request.headers);if(!e)for(let u of re)o.delete(u.toString().toLowerCase());(0,Y.T)(r.searchParams,!0);let l=new te({page:t.page,input:String(r),init:{body:t.request.body,geo:t.request.geo,headers:o,ip:t.request.ip,method:t.request.method,nextConfig:t.request.nextConfig}});n&&Object.defineProperty(l,"__isData",{enumerable:!1,value:!0});let a=new D({request:l,page:t.page}),h=await t.handler(l,a);if(h&&!(h instanceof Response))throw TypeError("Expected an instance of Response to be returned");let f=h?.headers.get("x-middleware-rewrite");if(h&&f){let u=new c(f,{forceLocale:!0,headers:t.request.headers,nextConfig:t.request.nextConfig});u.host===l.nextUrl.host&&(u.buildId=s||u.buildId,h.headers.set("x-middleware-rewrite",String(u))),n&&h.headers.set("x-nextjs-rewrite",j(String(u),String(r)))}let x=h?.headers.get("Location");if(h&&x){let u=new c(x,{forceLocale:!1,headers:t.request.headers,nextConfig:t.request.nextConfig});h=new Response(h.body,h),u.host===l.nextUrl.host&&(u.buildId=s||u.buildId,h.headers.set("Location",String(u))),n&&(h.headers.delete("Location"),h.headers.set("x-nextjs-redirect",j(String(u),String(r))))}return{response:h||g.next(),waitUntil:Promise.all(a[b])}}function S(t){return`The edge runtime does not support Node.js '${t}' module.
Learn More: https://nextjs.org/docs/messages/node-module-in-edge-runtime`}function ie(t){let e=new Proxy(function(){},{get(r,s){if(s==="then")return{};throw Error(S(t))},construct(){throw Error(S(t))},apply(r,s,n){if(typeof n[0]=="function")return n[0](e);throw Error(S(t))}});return new Proxy({},{get:()=>e})}function ne(){process!==d.g.process&&(process.env=d.g.process.env,d.g.process=process),Object.defineProperty(globalThis,"__import_unsupported",{value:ie,enumerable:!1,configurable:!0})}};export{he as default};
