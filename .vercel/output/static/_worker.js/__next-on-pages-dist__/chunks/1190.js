var O=(w,y,S)=>{"use strict";let f;S.d(y,{Yz:()=>x});var v=S(1216);try{f=S(2917)}catch{f=S(2917)}let{context:l,trace:h,SpanStatusCode:m,SpanKind:A}=f,E=n=>n!==null&&typeof n=="object"&&typeof n.then=="function",d=(n,t)=>{n.setStatus({code:m.ERROR,message:t?.message}),n.end()};class T{getTracerInstance(){return h.getTracer("next.js","0.0.1")}getContext(){return l}getActiveScopeSpan(){return h.getSpan(l?.active())}trace(...t){var r;let[e,i,p]=t,{fn:a,options:c}=typeof i=="function"?{fn:i,options:{}}:{fn:p,options:i};if(!v.lw.includes(e)&&process.env.NEXT_OTEL_VERBOSE!=="1")return a();let g=this.getSpanContext(c?.parentSpan??this.getActiveScopeSpan());return r=s=>{try{if(a.length>1)return a(s,u=>d(s,u));let o=a(s);return E(o)?o.then(()=>s.end(),u=>d(s,u)):s.end(),o}catch(o){throw d(s,o),o}},g?this.getTracerInstance().startActiveSpan(e,c,g,r):this.getTracerInstance().startActiveSpan(e,c,r)}wrap(...t){let r=this,[e,i,p]=t.length===3?t:[t[0],{},t[1]];return v.lw.includes(e)||process.env.NEXT_OTEL_VERBOSE==="1"?function(){let a=i;typeof a=="function"&&typeof p=="function"&&(a=a.apply(this,arguments));let c=arguments.length-1,g=arguments[c];if(typeof g!="function")return r.trace(e,a,()=>p.apply(this,arguments));{let s=r.getContext().bind(l.active(),g);return r.trace(e,a,(o,u)=>(arguments[c]=function(C){return u?.(C),s.apply(this,arguments)},p.apply(this,arguments)))}}:p}startSpan(...t){let[r,e]=t,i=this.getSpanContext(e?.parentSpan??this.getActiveScopeSpan());return this.getTracerInstance().startSpan(r,e,i)}getSpanContext(t){return t?h.setSpan(l.active(),t):void 0}}let x=(()=>{let n=new T;return()=>n})()};export{O as default};
